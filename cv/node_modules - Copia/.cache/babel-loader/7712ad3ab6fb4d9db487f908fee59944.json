{"ast":null,"code":"\"use strict\";\n\nconst express = require('express');\n\nconst pluralize = require('pluralize');\n\nconst delay = require('./delay');\n\nmodule.exports = opts => {\n  const router = express.Router();\n  router.use(delay); // Rewrite URL (/:resource/:id/:nested -> /:nested) and request query\n\n  function get(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.query[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  } // Rewrite URL (/:resource/:id/:nested -> /:nested) and request body\n\n\n  function post(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.body[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n\n  return router.get('/:resource/:id/:nested', get).post('/:resource/:id/:nested', post);\n};","map":{"version":3,"sources":["C:/Users/lucas/Desktop/TI/Entreprise-connection-fase-2-2022/node_modules/json-server/lib/server/router/nested.js"],"names":["express","require","pluralize","delay","module","exports","opts","router","Router","use","get","req","res","next","prop","singular","params","resource","query","foreignKeySuffix","id","url","nested","post","body"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;AAEA,MAAME,KAAK,GAAGF,OAAO,CAAC,SAAD,CAArB;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,IAAI,IAAI;AACvB,QAAMC,MAAM,GAAGP,OAAO,CAACQ,MAAR,EAAf;AACAD,EAAAA,MAAM,CAACE,GAAP,CAAWN,KAAX,EAFuB,CAEJ;;AAEnB,WAASO,GAAT,CAAaC,GAAb,EAAkBC,GAAlB,EAAuBC,IAAvB,EAA6B;AAC3B,UAAMC,IAAI,GAAGZ,SAAS,CAACa,QAAV,CAAmBJ,GAAG,CAACK,MAAJ,CAAWC,QAA9B,CAAb;AACAN,IAAAA,GAAG,CAACO,KAAJ,CAAW,GAAEJ,IAAK,GAAER,IAAI,CAACa,gBAAiB,EAA1C,IAA+CR,GAAG,CAACK,MAAJ,CAAWI,EAA1D;AACAT,IAAAA,GAAG,CAACU,GAAJ,GAAW,IAAGV,GAAG,CAACK,MAAJ,CAAWM,MAAO,EAAhC;AACAT,IAAAA,IAAI;AACL,GATsB,CASrB;;;AAGF,WAASU,IAAT,CAAcZ,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAC5B,UAAMC,IAAI,GAAGZ,SAAS,CAACa,QAAV,CAAmBJ,GAAG,CAACK,MAAJ,CAAWC,QAA9B,CAAb;AACAN,IAAAA,GAAG,CAACa,IAAJ,CAAU,GAAEV,IAAK,GAAER,IAAI,CAACa,gBAAiB,EAAzC,IAA8CR,GAAG,CAACK,MAAJ,CAAWI,EAAzD;AACAT,IAAAA,GAAG,CAACU,GAAJ,GAAW,IAAGV,GAAG,CAACK,MAAJ,CAAWM,MAAO,EAAhC;AACAT,IAAAA,IAAI;AACL;;AAED,SAAON,MAAM,CAACG,GAAP,CAAW,wBAAX,EAAqCA,GAArC,EAA0Ca,IAA1C,CAA+C,wBAA/C,EAAyEA,IAAzE,CAAP;AACD,CApBD","sourcesContent":["\"use strict\";\n\nconst express = require('express');\n\nconst pluralize = require('pluralize');\n\nconst delay = require('./delay');\n\nmodule.exports = opts => {\n  const router = express.Router();\n  router.use(delay); // Rewrite URL (/:resource/:id/:nested -> /:nested) and request query\n\n  function get(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.query[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  } // Rewrite URL (/:resource/:id/:nested -> /:nested) and request body\n\n\n  function post(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.body[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n\n  return router.get('/:resource/:id/:nested', get).post('/:resource/:id/:nested', post);\n};"]},"metadata":{},"sourceType":"script"}